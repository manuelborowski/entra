<!DOCTYPE html>
<html lang="en">
<head>
    <title>IDM</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link href="{{ url_for('static', filename = 'css/main.css') }}" rel="stylesheet">
    {{ JSGlue.include() }}
    <style>
        html {
            height: 100%;
            margin: 0;
        }

        body {
            height: 100%;
            margin: 0;
        }
    </style>
</head>
<body>
<div class="container-fluid" style="height:90%;">


        <form id="survey" action="{{ url_for('save_contactmoment') }}" method="post">
        <div class="container">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                    <div class="alert alert-info" role="alert">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <h1>Contactmoment</h1>
            <img src="{{ url_for('static', filename='img/LogoCampus.png') }}" width="200" height="200" align="right"></a>
            U gebruikt e-mail:&nbsp;<b>{{ email }}</b><br>
            <p>Hier kan u voor één contactmoment inschrijven.<br>
                Een contactmoment dat volzet is (rood), kan niet meer worden geselecteerd.<br>
                Eén contactmoment duurt <b>{{ timeslot_length }}</b> minuten.<br>
                Kies een contactmoment en druk onderaan op <b>Insturen</b>.<br>
                <br>
            </p>
        </div>
        <input type="text" name="email_token" value="{{ email_token }}" hidden>
        <input type="text" name="organization" value="{{ organization }}" hidden>
        <input type="text" name="email" value="{{ email }}" hidden>
        <hr class="fat_line">
        {% if contact_table %}
            <table class="table table-bordered" style="width: 1px;">
                <tr>
                    <th style="white-space: nowrap;">Datum</th>
                    {% for s in contact_table[0].slots %}
                        <th>{{ s.time }}</th>
                    {% endfor %}
                </tr>
                {% for c in contact_table %}
                    <tr>
                        <td  style="white-space: nowrap;">{{ c.date }}</td>
                        {% for s in c.slots %}
                            {%  if s.type == 'free' %}
                                <td><input type="radio"  name="chbx" value="{{ c.date }}-{{ s.time }}" {% if s.type == 'busy' %}disabled{%  endif %}></td>
                            {% else %}
                                <td style="background-color:red;"></td>
                            {%  endif %}
                        {%  endfor %}
                    </tr>
                {%  endfor %}
            </table>
        {% endif %}
        <br>
        <div class="container">
            <button type="submit" class="btn btn-primary">Insturen</button>
        </div>

    </form>


</div>
</body>
{% block scripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
            crossorigin="anonymous"></script>
    <script>
    </script>
    <script type="text/javascript"> {% include "end_user/register.js" %}</script>
{% endblock %}
</html>
